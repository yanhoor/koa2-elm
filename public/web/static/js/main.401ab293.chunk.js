(this["webpackJsonpmall-web-react"]=this["webpackJsonpmall-web-react"]||[]).push([[0],{110:function(e,t,n){e.exports={layout_left:"layout_left--5L9NQ",layout_right:"layout_right--1x7Mz",layout_header:"layout_header--1MDN0",filter_actions:"filter_actions--dWtPi"}},163:function(e,t,n){e.exports={login_page:"Login_login_page__1m0Rz",container:"Login_container__Jlh7V",actions:"Login_actions__2FzwL"}},204:function(e,t,n){e.exports={sku_item_wrapper:"sku_item_wrapper--1uiwj"}},315:function(e,t,n){},318:function(e,t,n){},323:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"UserStore",(function(){return X}));var a=n(20),c=n(0),i=n.n(c),s=n(37),o=n.n(s),l=n(80),u=n(36),d=n(19),j=n(132),b=n.n(j),h=n(24),f=n(210),m=n(33),O=n.n(m),p=n(48),x=n(133),g=n(134),v=n(27),_=n(197),y=n.n(_),k="dev"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"./",REACT_APP_PIC_BASE:"../image/"}).REACT_APP_ENV?"/api":"./";console.log("==============",k);var C={baseURL:k,timeout:45e3,withCredentials:!0,method:"post",headers:{mobile_login_token:"3333333333"}},I=new(function(){function e(){Object(x.a)(this,e),this.api=y.a.create(),this.api.interceptors.request.use((function(e){return e}),(function(e){return console.log("\u8bf7\u6c42\u62e6\u622a\u51fa\u9519--\x3e ",e),Promise.reject(e)})),this.api.interceptors.response.use((function(e){return e.data}),(function(e){return console.log("\u54cd\u5e94\u62e6\u622a\u51fa\u9519--\x3e",e),Promise.reject(e)}))}return Object(g.a)(e,[{key:"fetch",value:function(){var e=Object(p.a)(O.a.mark((function e(t,n,r){var c,i,s,o,l,u,d=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object.assign({},C,r),i=c.formData,c.loading,s=c.method,o=Object(a.a)(Object(a.a)({},C),{},{url:t,method:s}),"get"===s?(o.method=s,o.params=n):i?(l=new FormData,u=null!==n&&void 0!==n?n:{},Object.keys(u).forEach((function(e){l.append(e,u[e])})),o.data=l):o.data=n,e.abrupt("return",new Promise((function(e,t){d.api.request(o).then((function(t){return e(t)})).catch((function(e){return t(e)}))})));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),e}()),w="../image/",S="/admin/register",F="/admin/list",E="/admin/login",N="/admin/logout",L="/admin/user_info",P="/admin/update_avatar",q="/admin/change_state",U="/shop/category_list",A="/shop/category_save",R="/shop/category_detail",T="/shop/list",V="/shop/save",D="/shop/detail",z="/goods/category_save",K="/goods/category_children",H="/goods/save",M="/goods/detail",$="/goods/list",B="/goods/label_list",W="/goods/label_detail",G="/goods/label_save",J="/address/query_children",X=new(function(){function e(){Object(x.a)(this,e),this.userInfo={id:"",name:"",mobile:"",password:"",type:1,roles:[]},Object(v.l)(this)}return Object(g.a)(e,[{key:"updateUser",value:function(){var e=Object(p.a)(O.a.mark((function e(){var t=this;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.fetch(L).then((function(e){if(e.success)return Object(v.o)((function(){t.userInfo=e.info})),!0})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"checkAndGetUserInfo",value:function(){var e=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.userInfo.id){e.next=4;break}return e.abrupt("return",this.updateUser());case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),Y=n(325),Q=n(328),Z=n(110),ee=n.n(Z),te=n(96),ne=n(340),re=n(214),ae=n(341),ce=n(342),ie=n(343),se=n(344),oe=[{key:13,title:"\u5546\u57ce\u914d\u7f6e",icon:ne.a,children:[{key:14,title:"\u9996\u9875\u914d\u7f6e",icon:ne.a,path:"/homeConfig"}]},{key:15,title:"\u6570\u636e\u7ba1\u7406",icon:re.a,children:[{key:12,title:"\u7ba1\u7406\u5458\u5217\u8868",icon:ne.a,path:"/home/admin"},{key:5,title:"\u5e97\u94fa\u6570\u636e",icon:ae.a,children:[{key:6,title:"\u5e97\u94fa\u5217\u8868",icon:ae.a,path:"/home/shopList"},{key:8,title:"\u5e97\u94fa\u7ba1\u7406",icon:ae.a,path:"/home/shopDetail"},{key:7,title:"\u5e97\u94fa\u5206\u7c7b",icon:ce.a,path:"/home/shopCategory"}]},{key:9,title:"\u5546\u54c1\u6570\u636e",icon:ne.a,children:[{key:10,title:"\u5546\u54c1\u7ba1\u7406",icon:ne.a,path:"/home/goods"},{key:11,title:"\u5546\u54c1\u6807\u7b7e",icon:ie.a,path:"/home/goodsLabel"}]}]},{key:4,title:"\u4e2a\u4eba\u4fe1\u606f",icon:se.a,path:"/home/me"}],le=n(3),ue=te.a.SubMenu;var de=Object(h.b)("UserStore")(Object(h.c)((function(e){var t=e.UserStore,n=Object(u.g)(),r=Object(u.h)(),c=t.userInfo.roles,i=qt.filter((function(e){return e.roles&&e.roles.some((function(e){return c.includes(e)}))})).map((function(e){return e.path}));return Object(le.jsx)(te.a,{mode:"inline",theme:"dark",children:function e(t){return t.map((function(t){return t.children?Object(le.jsx)(ue,{title:t.title,icon:Object(le.jsx)(t.icon,{}),children:e(t.children)},t.key):Object(le.jsxs)(te.a.Item,{icon:Object(le.jsx)(t.icon,{}),onClick:function(){return e=t.path,void(r.pathname!==e&&n.push(e));var e},children:[" ",t.title," "]},t.key)}))}(function e(t){var n=[];return t.forEach((function(t){var r=Object(a.a)({},t);if(t.children){var c=e(t.children);r.children=c}(i.includes(r.path)||r.children&&r.children.length)&&n.push(r)})),n}(oe))})}))),je=n(333),be=n(153),he=n(335),fe=n(123),me=n(345),Oe=Object(h.c)((function(){var e=Object(c.useState)((function(){return X})),t=Object(d.a)(e,1)[0],n=w+t.userInfo.avatar,r=Object(u.g)(),a=Object(u.h)(),i=function(e){switch(e){case 1:"/home/me"!==a.pathname&&r.push("/home/me");break;case 2:je.a.confirm({title:"\u786e\u8ba4\u9000\u51fa\uff1f",icon:Object(le.jsx)(fe.a,{}),onOk:function(){I.fetch(N).then((function(e){e.success&&r.push("/login"),f.b.success(e.msg)}))}})}},s=Object(le.jsxs)(te.a,{children:[Object(le.jsx)(te.a.Item,{icon:Object(le.jsx)(se.a,{}),onClick:function(){return i(1)},children:"\u4e2a\u4eba\u4fe1\u606f"},"1"),Object(le.jsx)(te.a.Item,{icon:Object(le.jsx)(me.a,{}),onClick:function(){return i(2)},children:"\u9000\u51fa\u767b\u5f55"},"2")]});return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)("div",{}),Object(le.jsx)(be.a,{overlay:s,children:Object(le.jsx)(he.a,{src:n})})]})})),pe=Y.a.Header,xe=Y.a.Sider,ge=Y.a.Content;var ve=Object(h.b)("UserStore")(Object(h.c)((function(e){return Object(le.jsxs)("h3",{children:["about232323",e.UserStore.userInfo.name]})}))),_e=n(331),ye=n(207),ke=n(151),Ce=n(41),Ie={required:function(e){return{required:!0,validator:function(e,t){return new Promise((function(n,r){e.required||r(),"undefined"==typeof t||null==t?r(new Error("\u4e0d\u80fd\u4e3a\u7a7a")):(t instanceof Array?0==t.length&&r(new Error("\u4e0d\u80fd\u4e3a\u7a7a")):"string"==typeof t&&0==t.length&&r(new Error("\u4e0d\u80fd\u4e3a\u7a7a")),n())}))},trigger:e}},limit:function(e,t,n){return"undefined"!=typeof e&&e||(e=0),"undefined"!=typeof t&&t||(t=0),"undefined"!=typeof n&&n||(n="change"),{min:e,max:t,message:"\u4ec5\u9650\u8f93\u5165".concat(e,"-").concat(t,"\u4e2a\u5b57\u7b26"),trigger:n}},email:function(e){return"undefined"!=typeof e&&e||(e="blur"),{message:"\u90ae\u7bb1\u683c\u5f0f\u9519\u8bef",type:"email",trigger:e}},phone:function(e){return"undefined"!=typeof e&&e||(e="blur"),{validator:function(e,t){return new Promise((function(e,n){if(t){if(/^(13[0-9]|14[0-9]|15[0-9]|18[0-9]|17[0-9])[0-9]{8}$/.test(t.trim()))if(t){/^0{0,1}(13[0-9]|14[0-9]|15[0-9]|18[0-9]|17[0-9])[0-9]{8}$/.test(t.trim())?e():n(new Error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"))}else e();else{var r=t.toString();if("1"==r.substring(0,1))n(new Error("\u662f\u624b\u673a\u7535\u8bdd\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"));else if("0"!=r.substring(0,1))n(new Error("\u662f\u56fa\u8bdd\u7535\u8bdd\uff0c\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u533a\u53f7"));else if(-1==t.indexOf("-"))n(new Error('\u8bf7\u5728\u533a\u53f7\u540e\u52a0\u4e0a"-"'));else{/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/.test(t.trim())?e():n(new Error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u56fa\u5b9a\u7535\u8bdd"))}}}else e()}))},trigger:e}},mobile:function(e){return"undefined"!=typeof e&&e||(e="blur"),{validator:function(e,t){return new Promise((function(e,n){if(t){/^(1[3-9][0-9])[0-9]{8}$/.test(t.trim())?e():n(new Error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"))}else e()}))},trigger:e}},telephone:function(e){return"undefined"!=typeof e&&e||(e="blur"),{validator:function(e,t,n){if(t)if("0"!=t.toString().substring(0,1))n(new Error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u533a\u53f7"));else if(-1==t.indexOf("-"))n(new Error('\u8bf7\u5728\u533a\u53f7\u540e\u52a0\u4e0a"-"'));else{/^((0\d{2,3})-)(\d{7,8})(-(\d{3,}))?$/.test(t.trim())?n():n(new Error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u56fa\u5b9a\u7535\u8bdd"))}else n()},trigger:e}},postCode:function(e){return"undefined"!=typeof e&&e||(e="blur"),{validator:function(e,t,n){if(t){6==t.trim().length||/^[1-9]\d{5}(?!\d)$/.test(t.trim())?n():n(new Error("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u653f\u7f16\u7801"))}else n()},trigger:e}},idCard:function(e){return"undefined"!=typeof e&&e||(e="blur"),{validator:function(e,t,n){if(t){if(/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/.test(t)){if(18==t.length){for(var r=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),a=new Array(1,0,10,9,8,7,6,5,4,3,2),c=0,i=0;i<17;i++)c+=t.substring(i,i+1)*r[i];var s=c%11,o=t.substring(17);2==s?"X"==o||"x"==o?n():n("\u8eab\u4efd\u8bc1\u53f7\u7801\u4e0d\u6b63\u786e"):o==a[s]?n():n("\u8eab\u4efd\u8bc1\u53f7\u7801\u4e0d\u6b63\u786e")}}else n("\u8eab\u4efd\u8bc1\u53f7\u7801\u4e0d\u6b63\u786e")}else n()},trigger:e}},range:function(e,t,n){return"undefined"!=typeof n&&n||(n="blur"),{validator:function(n,r){return new Promise((function(n,a){if(r+""){var c=null,i=null;c="undefined"==typeof e?null:"function"==typeof e?e():e<0||isNaN(e)?null:e,i="undefined"==typeof t?null:"function"==typeof t?t():t<0||isNaN(t)?null:t,isNaN(1*r)?a(new Error("\u5fc5\u987b\u4e3a\u6570\u5b57")):null!=c&&1*r<1*c?a(new Error("\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e"+c)):null!=i&&1*r>1*i?a(new Error("\u5fc5\u987b\u5c0f\u4e8e\u7b49\u4e8e"+i)):n()}else n()}))},trigger:n}},precision:function(e,t,n){return"undefined"!=typeof n&&n||(n="blur"),{validator:function(n,r,a){if(r)if(isNaN(r))a(new Error("\u5fc5\u987b\u4e3a\u6570\u5b57"));else{var c=2;c="undefined"==typeof e?2:"function"==typeof e?e():e<0||isNaN(e)?2:e;var i=r.toString();if(-1!=i.indexOf("."))if(0==c)a(new Error("\u53ea\u80fd\u4e3a\u6574\u6570"));else 1*i.substring(i.indexOf(".")+1,i.length).length>c?a(new Error("\u5c0f\u6570\u4f4d\u540e\u53ea\u80fd\u4fdd\u7559"+c+"\u4f4d")):a();else i.length>t?a(new Error("\u53ea\u80fd"+t+"\u4f4d\u6570")):a()}else a()},trigger:n}},notChinese:function(e){return"undefined"!=typeof e&&e||(e="blur"),{validator:function(e,t,n){if(t){/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi.test(t)?n("\u5b57\u7b26\u4e0d\u80fd\u4e3a\u4e2d\u6587"):t.length>3&&t.length<20?n():n("\u957f\u5ea6\u5728 4 \u5230 20\u4e2a\u5b57\u7b26")}else n()},trigger:e}}},we=n(346),Se=n(347),Fe=n(163),Ee=n.n(Fe),Ne={labelCol:{span:8},wrapperCol:{span:16}};var Le=n(338),Pe=n(329),qe=n(69),Ue=n(213),Ae=n(90),Re=n.n(Ae);function Te(e){var t=e.value,n=void 0===t?"":t,r=e.maxSize,a=void 0===r?10:r,c=e.typeList,i=void 0===c?[".jpg",".jpeg",".png",".gif"]:c,s=e.uploadPath,o=void 0===s?"/file/upload":s,l=e.onChange,u=w+n,d=function(e,t){var n,r,c=null===(n=e.name)||void 0===n?void 0:n.lastIndexOf("."),s=null===(r=e.name)||void 0===r?void 0:r.substring(c),o=e.size/1024/1024>a,l=i.includes(s);return l||f.b.error("\u4ec5\u5141\u8bb8 ".concat(i.join("/")," \u683c\u5f0f")),o&&f.b.error("\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7 ".concat(a,"M")),l&&!o};return Object(le.jsx)(Pe.a,{accept:"image/*",showUploadList:!1,beforeUpload:d,customRequest:function(e){var t=e.file;d(t)&&I.fetch(o,{file:t,lastFilePath:n},{formData:!0}).then((function(e){e.success&&(null===l||void 0===l||l(e.path))}))},children:n?Object(le.jsx)(qe.a,{title:"\u70b9\u51fb\u4fee\u6539",children:Object(le.jsx)("img",{src:u,className:Re.a.img_preview})}):Object(le.jsxs)("div",{className:"".concat(Re.a.upload_action," upload_action"),children:[Object(le.jsx)(Ue.a,{style:{fontSize:"36px"}}),Object(le.jsx)("p",{children:"\u70b9\u51fb\u4e0a\u4f20"})]})})}var Ve=Object(h.b)("UserStore")(Object(h.c)((function(e){var t=e.UserStore,n=t.userInfo;return Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)(Le.b,{title:"\u4e2a\u4eba\u4fe1\u606f",bordered:!0,children:[Object(le.jsx)(Le.b.Item,{label:"\u7528\u6237\u540d",children:n.name}),Object(le.jsx)(Le.b.Item,{label:"\u624b\u673a\u53f7",children:n.mobile}),Object(le.jsx)(Le.b.Item,{label:"\u5bc6\u7801",children:n.password}),Object(le.jsx)(Le.b.Item,{label:"\u6ce8\u518c\u65f6\u95f4",children:n.create_time}),Object(le.jsx)(Le.b.Item,{label:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",children:n.modify_time}),Object(le.jsx)(Le.b.Item,{label:"\u5934\u50cf",children:Object(le.jsx)(Te,{value:n.avatar,onChange:function(){t.updateUser()},uploadPath:P})})]})})}))),De=n(111),ze=n(65),Ke=n(212);function He(e){var t=e.top,n=e.table,r=e.actions;return Object(le.jsxs)("div",{className:"Layout_list",children:[Object(le.jsx)("div",{className:"filter_form",children:t}),Object(le.jsx)("div",{className:ee.a.filter_actions,children:r}),Object(le.jsx)("div",{className:"list_content",children:n})]})}var Me=n(326),$e=n(201);function Be(e){var t=e.columns,n=e.rowKey,r=void 0===n?"id":n,i=e.onChange,s=e.pagination,o=e.dataSource,l=e.expandable,u=Object(c.useState)(),j=Object(d.a)(u,2),b=j[0],h=j[1];Object(c.useEffect)((function(){return window.addEventListener("resize",f),function(){return window.removeEventListener("resize",f)}}),[]),Object(c.useEffect)((function(){f()}),[o]);var f=Object($e.debounce)(Object(p.a)(O.a.mark((function e(){var t,n,r,a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null===(t=document.querySelector("#layoutRight"))||void 0===t?void 0:t.clientHeight,r=document.documentElement.clientHeight,(a=document.querySelector("#pageTable"))&&(c=a.getBoundingClientRect(),h(n>r?c.height-(n-r)-110:n-c.top-150));case 4:case"end":return e.stop()}}),e)}))),20);return Object(le.jsx)(Me.a,{id:"pageTable",size:"middle",rowClassName:function(e,t){return t%2===1?Re.a.table_striped:""},pagination:s,onChange:i,dataSource:o,expandable:l,scroll:{y:b},rowKey:r,children:function(){var e=t.some((function(e){return"index"===e.key})),n=t.some((function(e){return"modify_time"===e.key}));return e||t.unshift({title:"#",dataIndex:"",key:"index",render:function(e,t,n){return n+1}}),n||t.splice(-1,0,{title:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",dataIndex:"modify_time",key:"modify_time"}),t}().map((function(e){return Object(le.jsx)(Me.a.Column,Object(a.a)({},e))}))})}function We(e){var t=e.url,n=e.params,r=e.options,i=Object(c.useState)([]),s=Object(d.a)(i,2),o=s[0],l=s[1],u=Object(c.useState)({current:1,pageSize:20,total:0,pageSizeOptions:["3","5","10","20","30"],showSizeChanger:!0}),j=Object(d.a)(u,2),b=j[0],h=j[1],f=function(){return{current:b.current,pageSize:b.pageSize}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I.fetch(t,Object(a.a)(Object(a.a)(Object(a.a)({},n),f()),e),r).then((function(e){l(e.list),h((function(t){return Object(a.a)(Object(a.a)({},t),{},{total:e.amount})}))}))};return Object(c.useEffect)(m,[b.current,b.pageSize]),{pageList:o,pagination:b,getPageList:m,setPagination:h}}var Ge=Object(h.b)("UserStore")(Object(h.c)((function(e){var t=_e.a.useForm(),n=Object(d.a)(t,1)[0],r=e.UserStore,a=We({url:F,options:{method:"get"}}),c=a.pageList,i=a.pagination,s=a.getPageList,o=a.setPagination,l=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.getFieldsValue();e&&(t.current=1),s(t)},u=function(e,t){I.fetch(q,{state:t,id:e}).then((function(e){if(e.success)return f.b.success(e.msg),l(),e;f.b.error(e.msg)}))},j=Object(le.jsx)(_e.a,{form:n,children:Object(le.jsxs)(De.a,{gutter:[0,10],children:[Object(le.jsx)(ze.a,{span:8,children:Object(le.jsx)(_e.a.Item,{label:"\u7528\u6237\u540d",name:"name",children:Object(le.jsx)(ye.a,{})})}),Object(le.jsx)(ze.a,{span:8,children:Object(le.jsx)(_e.a.Item,{label:"\u624b\u673a\u53f7",name:"mobile",children:Object(le.jsx)(ye.a,{})})})]})}),b=Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Ce.a,{onClick:function(){return l()},children:"\u67e5\u8be2"}),Object(le.jsx)(Ce.a,{onClick:function(e){n.resetFields(),l(!0)},children:"\u91cd\u7f6e"})]}),h=[{title:"\u7528\u6237\u540d",dataIndex:"name",key:"name"},{title:"\u624b\u673a\u53f7",dataIndex:"mobile",key:"mobile"},{title:"\u6743\u9650\u7c7b\u578b",dataIndex:"type",key:"type",render:function(e,t,n){var r="";switch(t.type){case 1:r="\u8d85\u7ea7\u7ba1\u7406\u5458";break;default:case 2:r="\u5e97\u94fa\u7ba1\u7406\u5458"}return r}},{title:"\u7528\u6237\u72b6\u6001",dataIndex:"state",key:"state",render:function(e,t,n){return Object(le.jsx)(Ke.a,{color:1===t.state?"green":"grey",children:1===t.state?"\u542f\u7528":"\u7981\u7528"})}},{title:"\u5934\u50cf",dataIndex:"avatar",key:"avatar",render:function(e,t,n){return t.avatar?Object(le.jsx)("img",{src:w+t.avatar,style:{maxWidth:"50px",height:"50px"}}):"/"}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",render:function(e,t,n){var a=r.userInfo.id===t.id;return Object(le.jsx)("p",{children:1===t.state?Object(le.jsx)(Ce.a,{type:"link",disabled:a,onClick:function(){return u(t.id,2)},children:"\u7981\u7528"}):Object(le.jsx)(Ce.a,{type:"link",disabled:a,onClick:function(){return u(t.id,1)},children:"\u542f\u7528"})})}}];return Object(le.jsx)(He,{top:j,actions:b,table:Object(le.jsx)(Be,{columns:h,onChange:function(e,t,n){o(e)},dataSource:c,pagination:i})})}))),Je=n(337);function Xe(e){var t=e.title,n=e.onClose,r=e.visible,a=e.content,c=e.width,i=void 0===c?500:c;return Object(le.jsx)(Je.a,{title:t,onClose:n,visible:r,width:i,children:a})}function Ye(e){var t=e.id,n=e.onClose,r=e.visible,i=_e.a.useForm(),s=Object(d.a)(i,1)[0];Object(c.useEffect)((function(){o()}),[r]);var o=function(){t?I.fetch(W,{id:t},{method:"get"}).then((function(e){e.success?s.setFieldsValue(e.data):f.b.error(e.msg)})):s.setFieldsValue({id:"",name:"",color:"#000"})};return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)(_e.a,{form:s,labelCol:{span:8},wrapperCol:{span:12},children:[Object(le.jsx)(_e.a.Item,{label:"\u6807\u7b7e\u540d\u79f0",name:"name",rules:[Ie.required()],children:Object(le.jsx)(ye.a,{})}),Object(le.jsx)(_e.a.Item,{label:"\u989c\u8272",name:"color",rules:[Ie.required()],children:Object(le.jsx)("input",{type:"color"})})]}),Object(le.jsx)(Ce.a,{type:"primary",onClick:function(){s.validateFields().then((function(e){I.fetch(G,Object(a.a)(Object(a.a)({},e),{},{id:t})).then((function(e){e.success?(n(),f.b.success(e.msg)):f.b.error(e.msg)}))})).catch((function(e){console.log("--------------",e)}))},children:"\u4fdd\u5b58"})]})}var Qe=Object(h.b)("UserStore")(Object(h.c)((function(e){var t=_e.a.useForm(),n=Object(d.a)(t,1)[0],r=Object(c.useState)(!1),a=Object(d.a)(r,2),i=a[0],s=a[1],o=Object(c.useState)(""),l=Object(d.a)(o,2),u=l[0],j=l[1],b=e.UserStore,h=We({url:B,options:{method:"get"}}),m=h.pageList,O=h.pagination,p=h.getPageList,x=h.setPagination,g=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.getFieldsValue();e&&(t.current=1),p(t)},v=function(){s(!1),g()},_=Object(le.jsx)(_e.a,{form:n,children:Object(le.jsx)(De.a,{gutter:[0,10],children:Object(le.jsx)(ze.a,{span:8,children:Object(le.jsx)(_e.a.Item,{label:"\u6807\u7b7e\u540d\u79f0",name:"name",children:Object(le.jsx)(ye.a,{})})})})}),y=Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Ce.a,{onClick:function(){return g()},children:"\u67e5\u8be2"}),Object(le.jsx)(Ce.a,{onClick:function(e){n.resetFields(),g(!0)},children:"\u91cd\u7f6e"}),Object(le.jsx)(Ce.a,{onClick:function(){b.userInfo.shop_id?(j(""),s(!0)):f.b.error("\u8bf7\u5148\u6dfb\u52a0\u5e97\u94fa")},children:"\u65b0\u589e"})]}),k=[{title:"\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u989c\u8272",dataIndex:"color",key:"color",render:function(e,t,n){return Object(le.jsx)(Ke.a,{color:t.color,children:t.color})}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",render:function(e,t,n){return Object(le.jsx)("p",{children:Object(le.jsx)(Ce.a,{type:"link",onClick:function(){return e=t.id,j(e),void s(!0);var e},children:"\u7f16\u8f91"})})}}];return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(He,{top:_,actions:y,table:Object(le.jsx)(Be,{columns:k,onChange:function(e,t,n){x(e)},dataSource:m,pagination:O})}),Object(le.jsx)(Xe,{title:u?"\u7f16\u8f91\u6807\u7b7e":"\u65b0\u5efa\u6807\u7b7e",visible:i,onClose:v,content:Object(le.jsx)(Ye,{id:u,onClose:v,visible:i})})]})}))),Ze=n(327),et=n(332),tt=n(42),nt=n.n(tt),rt=n(72),at=n(334),ct=n(339);function it(e){var t=e.addressName,n=e.value,r=e.onChange,a=e.onUpdate,s=i.a.useState([]),o=Object(d.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)(t),b=Object(d.a)(j,2),h=b[0],f=b[1];Object(c.useEffect)((function(){m()}),[]),Object(c.useEffect)((function(){f(t)}),[t]);var m=function(){var e=Object(p.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:t=e.sent,n=t.result[0].map((function(e){return e.level=1,e.isLeaf=!1,e})),u(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(p.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t[t.length-1]).loading=!0,e.next=4,g(n.id);case 4:r=e.sent,a=r.result[0],3!=n.level&&(n.children=a.map((function(e){return e.level=n.level+1,e.isLeaf=3===e.level,e}))),n.loading=!1,u(Object(rt.a)(l));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(O.a.mark((function e(){var t,n=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.abrupt("return",I.fetch(J,{parentCode:t},{method:"get"}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(le.jsxs)("div",{className:Re.a.picker_container,children:[Object(le.jsx)(ye.a,{disabled:!0,value:h,title:h}),Object(le.jsx)(at.a,{value:n,options:l,fieldNames:{label:"fullname",value:"id"},onChange:function(e,t){var n=t.map((function(e){return e?e.fullname:""})).join("");f(n),null===a||void 0===a||a(n),null===r||void 0===r||r(e,t)},loadData:function(e){return x(e)},children:Object(le.jsx)(Ce.a,{icon:Object(le.jsx)(ct.a,{})})})]})}var st=n(122);function ot(e){var t=e.value,n=e.onChange,r=Object(c.useState)([]),a=Object(d.a)(r,2),i=a[0],s=a[1];return Object(c.useEffect)((function(){I.fetch(U,{},{method:"get"}).then((function(e){e.success&&s(e.list)}))}),[]),Object(le.jsx)(st.a,{value:t,onChange:n,allowClear:!0,children:i.map((function(e){return Object(le.jsx)(st.a.Option,{value:e.id,children:e.name},e.id)}))})}var lt=n(49),ut=n.n(lt);var dt=Object(h.b)("UserStore")(Object(h.c)((function(e){var t=e.id,n=e.onClose,r=(e.visible,e.UserStore),i=_e.a.useForm(),s=Object(d.a)(i,1)[0],o=Object(c.useState)(""),l=Object(d.a)(o,2),u=l[0],j=l[1],b=Object(c.useState)(""),h=Object(d.a)(b,2),m=h[0],O=h[1];Object(c.useEffect)((function(){p()}),[t]);var p=function(){if(!t)return j(""),void s.setFieldsValue({id:"",create_time:"",modify_time:"",name:"",contract:"",shop_category_id:"",desc:"",slogan:"",opening_range:[],avatar:"",business_license:"",service_permission:"",deliver_fee:"",deliver_fee_start_amount:"",provinceCode:"",cityCode:"",countyCode:"",codeList:[],headAddress:"",tailAddress:""});I.fetch(D,{id:t},{method:"get"}).then((function(e){if(e.success){var t=e.info,n=t.opening_range?t.opening_range.map((function(e){return ut()(e)})):[];s.setFieldsValue(Object(a.a)(Object(a.a)({},e.info),{},{opening_range:n,codeList:[e.info.provinceCode,e.info.cityCode,e.info.countyCode]})),j(e.info.headAddress)}else f.b.error(e.msg)}))};return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)(_e.a,{form:s,labelCol:{span:8},wrapperCol:{span:12},children:[Object(le.jsx)(_e.a.Item,{label:"\u5e97\u94fa\u540d\u79f0",name:"name",rules:[Ie.required()],children:Object(le.jsx)(ye.a,{})}),Object(le.jsx)(_e.a.Item,{label:"\u8054\u7cfb\u7535\u8bdd",name:"contract",rules:[Ie.required(),Ie.mobile()],children:Object(le.jsx)(ye.a,{maxLength:11})}),Object(le.jsx)(_e.a.Item,{label:"\u5e97\u94fa\u7c7b\u522b",name:"shop_category_id",rules:[Ie.required()],children:Object(le.jsx)(ot,{})}),Object(le.jsx)(_e.a.Item,{label:"\u5e97\u94fa\u7b80\u4ecb",name:"desc",rules:[Ie.required()],children:Object(le.jsx)(ye.a.TextArea,{})}),Object(le.jsx)(_e.a.Item,{label:"\u5e97\u94fa\u6807\u8bed",name:"slogan",children:Object(le.jsx)(ye.a.TextArea,{})}),Object(le.jsx)(_e.a.Item,{label:"\u8425\u4e1a\u65f6\u95f4",name:"opening_range",children:Object(le.jsx)(Ze.a.RangePicker,{format:"HH:mm"})}),Object(le.jsx)(_e.a.Item,{label:"\u5e97\u94fa\u5934\u50cf",name:"avatar",rules:[Ie.required()],children:Object(le.jsx)(Te,{})}),Object(le.jsx)(_e.a.Item,{label:"\u8425\u4e1a\u6267\u7167",name:"business_license",rules:[Ie.required()],children:Object(le.jsx)(Te,{})}),Object(le.jsx)(_e.a.Item,{label:"\u670d\u52a1\u8bb8\u53ef\u8bc1",name:"service_permission",rules:[Ie.required()],children:Object(le.jsx)(Te,{})}),Object(le.jsx)(_e.a.Item,{label:"\u914d\u9001\u8d39",name:"deliver_fee",rules:[Ie.required()],children:Object(le.jsx)(et.a,{className:nt.a.number_input})}),Object(le.jsx)(_e.a.Item,{label:"\u8d77\u9001\u4ef7",name:"deliver_fee_start_amount",rules:[Ie.required()],children:Object(le.jsx)(et.a,{className:nt.a.number_input})}),Object(le.jsx)(_e.a.Item,{label:"\u5730\u533a",name:"codeList",rules:[Ie.required()],children:Object(le.jsx)(it,{addressName:u,onUpdate:function(e){return O(e)}})}),Object(le.jsx)(_e.a.Item,{label:"\u8be6\u7ec6\u5730\u5740",name:"tailAddress",rules:[Ie.required()],children:Object(le.jsx)(ye.a,{})})]}),Object(le.jsx)(Ce.a,{type:"primary",onClick:function(){s.validateFields().then((function(e){var c=Object(d.a)(e.codeList,3),i=c[0],s=c[1],o=c[2];I.fetch(V,Object(a.a)(Object(a.a)({},e),{},{provinceCode:i,cityCode:s,countyCode:o,headAddress:m||u,id:t})).then((function(e){e.success?(null===n||void 0===n||n(),f.b.success(e.msg),t||r.updateUser()):f.b.error(e.msg)}))})).catch((function(e){console.log("--------------",e)}))},children:"\u4fdd\u5b58"})]})})));function jt(e){var t=e.record,n=t.admin;return Object(le.jsxs)(_e.a,{layout:"inline",labelCol:{span:6},wrapperCol:{span:18},className:nt.a.expanded_form,children:[Object(le.jsx)(_e.a.Item,{label:"\u5e97\u94fa\u540d\u79f0",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:t.name})}),Object(le.jsx)(_e.a.Item,{label:"\u8054\u7cfb\u7535\u8bdd",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:t.contract})}),Object(le.jsx)(_e.a.Item,{label:"\u6240\u5c5e\u5206\u7c7b",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:t.shop_category.name})}),Object(le.jsx)(_e.a.Item,{label:"\u7b80\u4ecb",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:t.desc})}),Object(le.jsx)(_e.a.Item,{label:"\u6807\u8bed",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:t.slogan})}),Object(le.jsx)(_e.a.Item,{label:"\u8425\u4e1a\u65f6\u95f4",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:t.opening_range.map((function(e){return ut()(e).format("HH:mm:ss")})).join(" \u81f3 ")})}),Object(le.jsx)(_e.a.Item,{label:"\u914d\u9001\u8d39",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:t.deliver_fee})}),Object(le.jsx)(_e.a.Item,{label:"\u8d77\u9001\u4ef7",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:t.deliver_fee_start_amount})}),Object(le.jsx)(_e.a.Item,{label:"\u5730\u5740",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:t.headAddress+t.tailAddress})}),Object(le.jsx)(_e.a.Item,{label:"\u521b\u5efa\u4eba",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:n.name})}),Object(le.jsx)(_e.a.Item,{label:"\u521b\u5efa\u65f6\u95f4",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:t.create_time})}),Object(le.jsx)(_e.a.Item,{label:"\u6700\u540e\u4fee\u6539\u65f6\u95f4",children:Object(le.jsx)("span",{className:nt.a.expand_item_content,children:t.modify_time})})]})}var bt=Object(h.b)("UserStore")(Object(h.c)((function(e){var t=_e.a.useForm(),n=Object(d.a)(t,1)[0],r=Object(c.useState)(!1),a=Object(d.a)(r,2),i=a[0],s=a[1],o=Object(c.useState)(""),l=Object(d.a)(o,2),u=l[0],j=l[1],b=(e.UserStore,We({url:T,options:{method:"get"}})),h=b.pageList,f=b.pagination,m=b.getPageList,O=b.setPagination,p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.getFieldsValue();e&&(t.current=1),m(t)},x=function(){s(!1),p()},g=Object(le.jsx)(_e.a,{form:n,children:Object(le.jsxs)(De.a,{gutter:[0,10],children:[Object(le.jsx)(ze.a,{span:8,children:Object(le.jsx)(_e.a.Item,{label:"\u5e97\u94fa\u540d\u79f0",name:"name",children:Object(le.jsx)(ye.a,{})})}),Object(le.jsx)(ze.a,{span:8,children:Object(le.jsx)(_e.a.Item,{label:"\u5e97\u94fa\u7c7b\u522b",name:"shop_category_id",children:Object(le.jsx)(ot,{})})})]})}),v=Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Ce.a,{onClick:function(){return p()},children:"\u67e5\u8be2"}),Object(le.jsx)(Ce.a,{onClick:function(e){n.resetFields(),p(!0)},children:"\u91cd\u7f6e"}),Object(le.jsx)(Ce.a,{onClick:function(){j(""),s(!0)},children:"\u65b0\u589e"})]}),_=[{title:"\u5e97\u94fa\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u8054\u7cfb\u7535\u8bdd",dataIndex:"contract",key:"contract"},{title:"\u6240\u5c5e\u5206\u7c7b",dataIndex:"shop_category",key:"shop_category",render:function(e,t,n){return t.shop_category.name}},{title:"\u7b80\u4ecb",dataIndex:"desc",key:"desc"},{title:"\u5730\u5740",dataIndex:"headAddress",key:"headAddress",render:function(e,t,n){return t.headAddress+t.tailAddress}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",render:function(e,t,n){return Object(le.jsx)("p",{children:Object(le.jsx)(Ce.a,{type:"link",onClick:function(){return e=t.id,j(e),void s(!0);var e},children:"\u7f16\u8f91"})})}}];return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(He,{top:g,actions:v,table:Object(le.jsx)(Be,{columns:_,onChange:function(e,t,n){O(e)},dataSource:h,pagination:f,expandable:{expandedRowRender:function(e){return Object(le.jsx)(jt,{record:e})}}})}),Object(le.jsx)(Xe,{title:u?"\u7f16\u8f91\u5e97\u94fa":"\u65b0\u5efa\u5e97\u94fa",visible:i,onClose:x,content:Object(le.jsx)(dt,{id:u,onClose:x,visible:i})})]})})));function ht(e){var t=e.id,n=e.onClose,r=e.visible,i=_e.a.useForm(),s=Object(d.a)(i,1)[0];Object(c.useEffect)((function(){o()}),[r]);var o=function(){t?I.fetch(R,{id:t},{method:"get"}).then((function(e){e.success?s.setFieldsValue(e.data):f.b.error(e.msg)})):s.setFieldsValue({id:"",name:"",icon:""})};return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)(_e.a,{form:s,labelCol:{span:8},wrapperCol:{span:12},children:[Object(le.jsx)(_e.a.Item,{label:"\u5206\u7c7b\u540d\u79f0",name:"name",rules:[Ie.required()],children:Object(le.jsx)(ye.a,{})}),Object(le.jsx)(_e.a.Item,{label:"\u56fe\u6807",name:"icon",rules:[Ie.required()],children:Object(le.jsx)(Te,{})})]}),Object(le.jsx)(Ce.a,{type:"primary",onClick:function(){s.validateFields().then((function(e){I.fetch(A,Object(a.a)(Object(a.a)({},e),{},{id:t})).then((function(e){e.success?(n(),f.b.success(e.msg)):f.b.error(e.msg)}))})).catch((function(e){console.log("--------------",e)}))},children:"\u4fdd\u5b58"})]})}var ft=Object(h.b)("UserStore")(Object(h.c)((function(e){var t=_e.a.useForm(),n=Object(d.a)(t,1)[0],r=Object(c.useState)(!1),a=Object(d.a)(r,2),i=a[0],s=a[1],o=Object(c.useState)(""),l=Object(d.a)(o,2),u=l[0],j=l[1],b=(e.UserStore,We({url:U,options:{method:"get"}})),h=b.pageList,f=b.pagination,m=b.getPageList,O=b.setPagination,p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.getFieldsValue();e&&(t.current=1),m(t)},x=function(){s(!1),p()},g=Object(le.jsx)(_e.a,{form:n,children:Object(le.jsx)(De.a,{gutter:[0,10],children:Object(le.jsx)(ze.a,{span:8,children:Object(le.jsx)(_e.a.Item,{label:"\u5206\u7c7b\u540d\u79f0",name:"name",children:Object(le.jsx)(ye.a,{})})})})}),v=Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Ce.a,{onClick:function(){return p()},children:"\u67e5\u8be2"}),Object(le.jsx)(Ce.a,{onClick:function(e){n.resetFields(),p(!0)},children:"\u91cd\u7f6e"}),Object(le.jsx)(Ce.a,{onClick:function(){j(""),s(!0)},children:"\u65b0\u589e"})]}),_=[{title:"\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u56fe\u6807",dataIndex:"icon",key:"icon",render:function(e,t,n){return t.icon?Object(le.jsx)("img",{src:w+t.icon,style:{maxWidth:"50px",height:"50px"}}):"/"}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",render:function(e,t,n){return Object(le.jsx)("p",{children:Object(le.jsx)(Ce.a,{type:"link",onClick:function(){return e=t.id,j(e),void s(!0);var e},children:"\u7f16\u8f91"})})}}];return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(He,{top:g,actions:v,table:Object(le.jsx)(Be,{columns:_,onChange:function(e,t,n){O(e)},dataSource:h,pagination:f})}),Object(le.jsx)(Xe,{title:u?"\u7f16\u8f91\u5206\u7c7b":"\u65b0\u5efa\u5206\u7c7b",visible:i,onClose:x,content:Object(le.jsx)(ht,{id:u,onClose:x,visible:i})})]})}))),mt=n(330);function Ot(e){var t,n=e.shop_id,r=_e.a.useForm(),i=Object(d.a)(r,1)[0],s=Object(c.useState)([]),o=Object(d.a)(s,2),l=o[0],u=o[1],j=Object(c.useState)(),b=Object(d.a)(j,2),h=b[0],m=b[1],O=Object(c.useState)(""),p=Object(d.a)(O,2),x=p[0],g=p[1],v=Object(c.useState)(!1),_=Object(d.a)(v,2),y=_[0],k=_[1],C=Object(c.useState)(),w=Object(d.a)(C,2),S=w[0],F=w[1];Object(c.useEffect)((function(){N(0).then((function(e){u(e)}))}),[]);var E=function e(t,n,r){return t.map((function(t){return t.key===n?Object(a.a)(Object(a.a)({},t),{},{children:r}):t.children?Object(a.a)(Object(a.a)({},t),{},{children:e(t.children,n,r)}):t}))},N=function(e){return I.fetch(K,{shop_id:n,parent_id:e},{method:"get"}).then((function(e){if(e.success)return e.list.map((function(e){return e.key=e.id,e}))}))};return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)("h3",{children:["\u5546\u54c1\u5206\u7c7b\u7ba1\u7406 ",Object(le.jsx)("span",{style:{fontSize:"12px"},children:"\uff08\u8282\u70b9\u53f3\u952e\u6dfb\u52a0\u5b50\u8282\u70b9\uff09"})]}),Object(le.jsx)(Ce.a,{onClick:function(){n?(m(null),k(!0),g("2"),F({parent_id:0,name:"",shop_id:n,level:0}),i.setFieldsValue({name:""})):f.b.error("\u8bf7\u5148\u6dfb\u52a0\u5e97\u94fa")},children:"\u6dfb\u52a0\u4e00\u7ea7\u5206\u7c7b"}),Object(le.jsx)(mt.a,{showLine:!0,loadData:function(e){return new Promise((function(t,n){if(e.children)return t();N(e.id).then((function(n){return u((function(t){return E(t,e.key,n)})),t()})).catch((function(e){n()}))}))},treeData:l,titleRender:function(e){var t=Object(le.jsxs)(te.a,{onClick:function(t){return function(e,t){switch(g(e),m(t),e){case"1":i.setFieldsValue(t),F(t),k(!0);break;case"2":i.setFieldsValue({name:""}),F({parent_id:t.id,name:"",shop_id:n,level:t.level+1}),k(!0)}}(t.key,e)},children:[Object(le.jsx)(te.a.Item,{children:" \u4fee\u6539\u540d\u79f0 "},"1"),2===e.level?null:Object(le.jsx)(te.a.Item,{children:" \u6dfb\u52a0\u5b50\u5206\u7c7b "},"2"),Object(le.jsx)(te.a.Item,{children:" \u5220\u9664\u8be5\u5206\u7c7b\u53ca\u4e0b\u7ea7\u5206\u7c7b "},"3")]});return Object(le.jsx)(be.a,{overlay:t,trigger:["contextMenu"],children:Object(le.jsx)("span",{children:e.name})})}}),Object(le.jsx)(je.a,{title:"1"===x?"\u4fee\u6539\u5206\u7c7b\u540d\u79f0":"\u65b0\u589e\u4e0b\u7ea7\u5206\u7c7b",visible:y,onOk:function(){i.validateFields().then((function(e){var t=Object(a.a)(Object(a.a)({},S),e);I.fetch(z,t).then((function(e){if(e.success){if(k(!1),"1"===x){h.name=e.data.name;var t=l;return u([]),void u(t)}var n=e.data;if(n.key=n.id,h)if(h.children){h.children.push(n);var r=l;u([]),u(r)}else{h.children=[n];var a=l;u([]),u(a)}else u([].concat(Object(rt.a)(l),[n]));f.b.success(e.msg)}else f.b.error(e.msg)}))})).catch((function(e){console.log("--------------",e)}))},onCancel:function(){return k(!1)},children:Object(le.jsxs)(_e.a,{form:i,children:["2"===x?Object(le.jsx)(_e.a.Item,{label:"\u4e0a\u7ea7\u5206\u7c7b",children:Object(le.jsx)(ye.a,{disabled:!0,value:null!==(t=null===h||void 0===h?void 0:h.name)&&void 0!==t?t:"\u65e0"})}):null,Object(le.jsx)(_e.a.Item,{label:"\u5206\u7c7b\u540d\u79f0",name:"name",rules:[Ie.required()],children:Object(le.jsx)(ye.a,{placeholder:"\u8bf7\u8f93\u5165\u5206\u7c7b\u540d\u79f0"})})]})})]})}var pt=Object(h.b)("UserStore")(Object(h.c)((function(e){var t,n=null!==(t=e.UserStore.userInfo.shop_id)&&void 0!==t?t:"";return Object(le.jsx)(le.Fragment,{children:Object(le.jsxs)(De.a,{children:[Object(le.jsx)(ze.a,{span:8,children:Object(le.jsx)(Ot,{shop_id:n})}),Object(le.jsx)(ze.a,{span:16,children:Object(le.jsx)("div",{className:nt.a.shop_manage_wrapper,children:Object(le.jsx)(dt,{id:n,visible:!0})})})]})})}))),xt=n(215);function gt(e){var t=e.typeList,n=void 0===t?[".jpg",".jpeg",".png",".gif"]:t,r=e.value,a=void 0===r?[]:r,i=e.onChange,s=e.uploadPath,o=void 0===s?"/file/upload":s,l=e.maxCount,u=void 0===l?5:l,j=Object(c.useState)(!1),b=Object(d.a)(j,2),h=b[0],m=b[1],O=Object(c.useState)(""),p=Object(d.a)(O,2),x=p[0],g=p[1],v=Object(c.useMemo)((function(){return a.map((function(e,t){return{uid:t,url:w+e}}))}),[a]);return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Pe.a,{listType:"picture-card",fileList:v,customRequest:function(e){var t=e.file;(function(e,t){var r,a,c=null===(r=e.name)||void 0===r?void 0:r.lastIndexOf("."),i=null===(a=e.name)||void 0===a?void 0:a.substring(c),s=n.includes(i);return s||f.b.error("\u4ec5\u5141\u8bb8 ".concat(n.join("/")," \u683c\u5f0f")),s})(t)&&I.fetch(o,{file:t},{formData:!0}).then((function(e){e.success&&(null===i||void 0===i||i([].concat(Object(rt.a)(a),[e.path])))}))},onPreview:function(e){g(e.url),m(!0)},onRemove:function(e){return new Promise((function(t,n){if(!e.url)return n();var r=e.url.lastIndexOf("/upload/"),c=e.url.substring(r+8);I.fetch("/file/delete",{path:c}).then((function(e){if(e.success){var r=a.indexOf(c);return a.splice(r,1),null===i||void 0===i||i(Object(rt.a)(a)),f.b.success(e.msg),t(!0)}return n()}))}))},accept:"image/*",children:v.length<=u?Object(le.jsx)(le.Fragment,{children:Object(le.jsx)(Ue.a,{size:48})}):null}),Object(le.jsx)(je.a,{visible:h,footer:null,onCancel:function(){return m(!1)},children:Object(le.jsx)("img",{alt:"example",style:{width:"100%"},src:x})})]})}function vt(e){var t=e.value,n=e.onChange,r=Object(c.useState)([]),a=Object(d.a)(r,2),i=a[0],s=a[1];return Object(c.useEffect)((function(){I.fetch(B,{},{method:"get"}).then((function(e){e.success&&s(e.list)}))}),[]),Object(le.jsx)(st.a,{value:t,onChange:n,allowClear:!0,mode:"multiple",children:i.map((function(e){return Object(le.jsx)(st.a.Option,{value:e.id,children:e.name},e.id)}))})}function _t(e){var t=e.value,n=e.onChange,r=e.UserStore.userInfo,a=i.a.useState([]),s=Object(d.a)(a,2),o=s[0],l=s[1];Object(c.useEffect)((function(){u()}),[]);var u=function(){var e=Object(p.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,n=t.map((function(e){return e.level=1,e.isLeaf=!1,e})),l(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(p.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t[t.length-1]).loading=!0,e.next=4,b(n.id);case 4:r=e.sent,3!=n.level&&(n.children=r.map((function(e){return e.level=n.level+1,e.isLeaf=3===e.level,e}))),n.loading=!1,l(Object(rt.a)(o));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(p.a)(O.a.mark((function e(){var t,n=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:0,e.abrupt("return",I.fetch(K,{shop_id:r.shop_id,parent_id:t},{method:"get"}).then((function(e){if(e.success)return e.list})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(le.jsx)("div",{children:Object(le.jsx)(at.a,{value:t,options:o,fieldNames:{label:"name",value:"id"},onChange:n,loadData:function(e){return j(e)},changeOnSelect:!0})})}var yt=n(204),kt=n.n(yt);var Ct=Object(h.b)("UserStore")(Object(h.c)((function(e){var t=e.id,n=e.onClose,r=e.UserStore,i=_e.a.useForm(),s=Object(d.a)(i,1)[0];Object(c.useEffect)((function(){o()}),[t]);var o=function(){if(!t){var e={id:"",name:"",category_ids:[],label_ids:[],desc:"",sku_list:[],pic_list:[]};return e.sku_list=[{price:"",pack_fee:"",name:""}],void s.setFieldsValue(e)}I.fetch(M,{id:t},{method:"get"}).then((function(e){e.success?s.setFieldsValue(e.info):f.b.error(e.msg)}))};return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)(_e.a,{form:s,name:"baseForm",labelCol:{span:6},wrapperCol:{span:18},children:[Object(le.jsx)(_e.a.Item,{label:"\u5546\u54c1\u540d\u79f0",name:"name",rules:[Ie.required()],children:Object(le.jsx)(ye.a,{})}),Object(le.jsx)(_e.a.Item,{label:"\u5546\u54c1\u63cf\u8ff0",name:"desc",children:Object(le.jsx)(ye.a,{})}),Object(le.jsx)(_e.a.Item,{label:"\u5546\u54c1\u6807\u7b7e",name:"label_ids",rules:[Ie.required()],children:Object(le.jsx)(vt,{})}),Object(le.jsx)(_e.a.Item,{label:"\u6240\u5c5e\u5206\u7c7b",name:"category_ids",rules:[Ie.required()],children:Object(le.jsx)(_t,{UserStore:r})}),Object(le.jsx)(_e.a.Item,{label:"\u5546\u54c1\u56fe\u7247",name:"pic_list",rules:[Ie.required()],children:Object(le.jsx)(gt,{})}),Object(le.jsx)(_e.a.List,{name:"sku_list",children:function(e,t){var n=t.add;t.remove;return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsxs)("h4",{children:["Sku\u5217\u8868 ",Object(le.jsx)(Ce.a,{onClick:function(){return n()},type:"text",style:{color:"#4098ef"},children:"\u6dfb\u52a0"})]}),e.map((function(e){var t=e.key,n=e.name,r=e.fieldKey,c=Object(xt.a)(e,["key","name","fieldKey"]);return Object(le.jsx)("div",{className:kt.a.sku_item_wrapper,children:Object(le.jsxs)(Q.a,{children:[Object(le.jsx)(_e.a.Item,Object(a.a)(Object(a.a)({},c),{},{fieldKey:[r,"name"],label:"\u540d\u79f0",name:[n,"name"],rules:[Ie.required()],children:Object(le.jsx)(ye.a,{})})),Object(le.jsx)(_e.a.Item,Object(a.a)(Object(a.a)({},c),{},{fieldKey:[r,"price"],label:"\u4ef7\u683c",name:[n,"price"],rules:[Ie.required()],children:Object(le.jsx)(et.a,{})})),Object(le.jsx)(_e.a.Item,Object(a.a)(Object(a.a)({},c),{},{fieldKey:[r,"pack_fee"],label:"\u5305\u88c5\u8d39",name:[n,"pack_fee"],rules:[Ie.required()],children:Object(le.jsx)(et.a,{})}))]})},t)}))]})}})]}),Object(le.jsx)(Ce.a,{type:"primary",onClick:function(){s.validateFields().then((function(e){I.fetch(H,Object(a.a)(Object(a.a)({},e),{},{id:t})).then((function(e){e.success?(n(),f.b.success(e.msg)):f.b.error(e.msg)}))})).catch((function(e){console.log("--------------",e)}))},children:"\u4fdd\u5b58"})]})})));var It=Object(h.b)("UserStore")(Object(h.c)((function(e){var t=_e.a.useForm(),n=Object(d.a)(t,1)[0],r=Object(c.useState)(!1),a=Object(d.a)(r,2),i=a[0],s=a[1],o=Object(c.useState)(""),l=Object(d.a)(o,2),u=l[0],j=l[1],b=We({url:$}),h=b.pageList,f=b.pagination,m=b.getPageList,O=b.setPagination,p=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.getFieldsValue();e&&(t.current=1),m(t)},x=function(){s(!1),p()},g=Object(le.jsx)(_e.a,{form:n,children:Object(le.jsx)(De.a,{gutter:[0,10],children:Object(le.jsx)(ze.a,{span:8,children:Object(le.jsx)(_e.a.Item,{label:"\u5546\u54c1\u540d\u79f0",name:"name",children:Object(le.jsx)(ye.a,{})})})})}),v=Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(Ce.a,{onClick:function(){return p()},children:"\u67e5\u8be2"}),Object(le.jsx)(Ce.a,{onClick:function(e){n.resetFields(),p(!0)},children:"\u91cd\u7f6e"}),Object(le.jsx)(Ce.a,{onClick:function(){j(""),s(!0)},children:"\u65b0\u589e"}),Object(le.jsx)(Ce.a,{onClick:function(){document.querySelector("#downloadForm").submit()},children:"\u5bfc\u51fa"})]}),_=[{title:"\u540d\u79f0",dataIndex:"name",key:"name"},{title:"\u5546\u54c1\u63cf\u8ff0",dataIndex:"desc",key:"desc"},{title:"\u5546\u54c1\u6807\u7b7e",dataIndex:"label_list",key:"label_list",width:200,render:function(e,t,n){return t.label_list.map((function(e){return Object(le.jsx)(Ke.a,{color:e.color,children:e.name})}))}},{title:"\u6240\u5c5e\u5206\u7c7b",dataIndex:"category_list",key:"category_list",render:function(e,t,n){return t.category_list.map((function(e){return e.name})).join("/")}},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"create_time",key:"create_time"},{title:"\u64cd\u4f5c",dataIndex:"action",key:"action",render:function(e,t,n){return Object(le.jsx)("p",{children:Object(le.jsx)(Ce.a,{type:"link",onClick:function(){return e=t.id,j(e),void s(!0);var e},children:"\u7f16\u8f91"})})}}];return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(He,{top:g,actions:v,table:Object(le.jsx)(Be,{columns:_,onChange:function(e,t,n){O(e)},dataSource:h,pagination:f})}),Object(le.jsx)(Xe,{title:u?"\u7f16\u8f91\u5546\u54c1":"\u65b0\u5efa\u5546\u54c1",width:600,visible:i,onClose:x,content:Object(le.jsx)(Ct,{id:u,onClose:x,visible:i})}),Object(le.jsx)("iframe",{name:"download",style:{display:"none"}}),Object(le.jsx)("form",{action:"/api/goods/export/goods_export",target:"download",id:"downloadForm",style:{display:"none"}})]})}))),wt=n(336);function St(e){e.path;var t=Object(u.g)();return Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(wt.a,{status:"404",title:"404",subTitle:"\u60f3\u5199\u51e0\u53e5\u9a9a\u8bdd...",extra:Object(le.jsx)(Ce.a,{type:"primary",onClick:function(){t.replace("/")},children:"\u8fd4\u56de\u9996\u9875"})}),","]})}var Ft=function(e){return console.log("----------------RouterView props-----------------",e),console.log("----------------useRouteMatch-----------------",Object(u.i)()),e.redirect?Object(le.jsx)(u.a,{exact:e.exact,strict:e.strict,from:e.from,to:e.redirect}):Object(le.jsx)(u.b,{path:e.path,exact:e.exact,strict:e.strict,render:function(t){return console.log("-------------route.props----------",t),e.roles?Object(le.jsx)(Et,{routeProps:t,route:e,children:e.children}):Object(le.jsx)(e.component,Object(a.a)(Object(a.a)({},t),{},{children:e.children}))}})},Et=Object(h.c)((function(e){var t=Object(c.useState)((function(){return X})),n=Object(d.a)(t,1)[0],r=n.userInfo,i=b.a.get("SID"),s=e.route.roles;if(i){var o=r.roles;return r.id?o.includes("super")||o.some((function(e){return s.includes(e)}))?(console.log("\u6743\u9650\u8def\u7531\uff0c\u767b\u5f55\u4fe1\u606f\u5df2\u83b7\u53d6",e.route.path),Object(le.jsx)(e.route.component,Object(a.a)(Object(a.a)({},e.routeProps),{},{children:e.children}))):Object(le.jsx)(u.a,{to:{pathname:"/pageNotFound"}}):(console.log("\u6743\u9650\u8def\u7531\uff0c\u5148\u83b7\u53d6\u767b\u5f55\u4fe1\u606f",e.route.path),n.checkAndGetUserInfo(),null)}return f.b.error("\u672a\u767b\u5f55"),Object(le.jsx)(u.a,{to:{pathname:"/login"}})})),Nt=["super","admin"],Lt=["super"],Pt=[{redirect:"/home/me",from:"/",exact:!0},{path:"/home",component:function(e){var t=e.children;return Object(le.jsxs)(Y.a,{children:[Object(le.jsx)(xe,{className:ee.a.layout_left,collapsible:!0,children:Object(le.jsx)(de,{})}),Object(le.jsxs)(Y.a,{className:ee.a.layout_right,id:"layoutRight",children:[Object(le.jsx)(pe,{className:ee.a.layout_header,children:Object(le.jsx)(Oe,{})}),Object(le.jsx)(ge,{children:Object(le.jsx)(Q.a,{className:"page_container",children:Object(le.jsx)(u.d,{children:t.map((function(e,t){return Object(le.jsx)(Ft,Object(a.a)({},e),t)}))})})})]})]})},children:[{redirect:"/home/me",exact:!0,from:"/home"},{path:"/home/admin",component:Ge,roles:Lt},{path:"/home/about",component:ve,roles:Lt},{path:"/home/shopCategory",component:ft,roles:Lt},{path:"/home/shopList",component:bt,roles:Lt},{path:"/home/shopDetail",component:pt,roles:Nt},{path:"/home/goods",component:It,roles:Nt},{path:"/home/goodsLabel",component:Qe,roles:Nt},{path:"/home/me",component:Ve,roles:Nt},{redirect:"/pageNotFound",exact:!0,from:"/home/*"}]},{path:"/login",component:function(){var e=_e.a.useForm(),t=Object(d.a)(e,1)[0],n=Object(u.g)(),r=Object(c.useState)(!1),i=Object(d.a)(r,2),s=i[0],o=i[1];b.a.remove("SID");var l=function(e){t.validateFields().then((function(t){2===e?j(t):h(t)})).catch((function(e){console.log("--------------",e)}))},j=function(e){I.fetch(E,e).then((function(e){e.success?(f.b.success(e.msg),n.replace("/home")):f.b.error(e.msg)}))},h=function(e){I.fetch(S,e).then((function(e){e.success?f.b.success(e.msg):f.b.error(e.msg)}))};return Object(le.jsx)("div",{className:Ee.a.login_page,children:Object(le.jsxs)("div",{className:Ee.a.container,children:[Object(le.jsxs)(_e.a,Object(a.a)(Object(a.a)({},Ne),{},{form:t,children:[s?Object(le.jsx)(_e.a.Item,{label:"\u7528\u6237\u540d",name:"name",rules:[Ie.required()],children:Object(le.jsx)(ye.a,{prefix:Object(le.jsx)(se.a,{})})}):null,Object(le.jsx)(_e.a.Item,{label:"\u624b\u673a\u53f7",name:"mobile",rules:[Ie.required(),Ie.mobile()],children:Object(le.jsx)(ye.a,{maxLength:11,prefix:Object(le.jsx)(we.a,{})})}),Object(le.jsx)(_e.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[Ie.required()],children:Object(le.jsx)(ye.a.Password,{prefix:Object(le.jsx)(Se.a,{})})}),s?Object(le.jsx)(_e.a.Item,{label:"\u8d26\u6237\u7c7b\u578b",name:"type",rules:[Ie.required()],children:Object(le.jsx)(ke.a.Group,{options:[{label:"\u8d85\u7ea7\u7ba1\u7406\u5458",value:1},{label:"\u5e97\u94fa\u7ba1\u7406\u5458",value:2}],optionType:"button",buttonStyle:"solid"})}):null]})),Object(le.jsxs)("div",{className:Ee.a.actions,children:[s?Object(le.jsx)(Ce.a,{type:"primary",onClick:function(){return l(1)},children:"\u6ce8\u518c"}):Object(le.jsx)(Ce.a,{type:"primary",onClick:function(){return l(2)},children:"\u767b\u5f55"}),s?Object(le.jsx)(Ce.a,{type:"link",onClick:function(){return o(!1)},children:"\u5df2\u6709\u8d26\u53f7\uff1f\u53bb\u767b\u5f55"}):Object(le.jsx)(Ce.a,{type:"link",onClick:function(){return o(!0)},children:"\u6ca1\u6709\u8d26\u53f7\uff1f\u53bb\u6ce8\u518c"})]})]})})}},{path:"*",component:St}];var qt=function e(t){var n=[];return t.forEach((function(t){var r=Object(a.a)({},t);r.children&&(n=n.concat(e(r.children)),r.children=n),n.push(t)})),n}(Pt);n(315);var Ut=function(){return Object(le.jsx)("div",{className:"App",children:Object(le.jsx)(l.a,{children:Object(le.jsx)(u.d,{children:Pt.map((function(e,t){return Object(le.jsx)(Ft,Object(a.a)({},e),t)}))})})})},At=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,348)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},Rt=n(18),Tt=n(205),Vt=n.n(Tt);n(316),n(317),n(318);ut.a.locale("en"),o.a.render(Object(le.jsx)(h.a,Object(a.a)(Object(a.a)({},r),{},{children:Object(le.jsx)(Rt.a,{locale:Vt.a,children:Object(le.jsx)(Ut,{})})})),document.getElementById("root")),At()},42:function(e,t,n){e.exports={number_input:"number_input--2sY-Y",shop_manage_wrapper:"shop_manage_wrapper--MhxDl",expanded_form:"expanded_form--25yT8",expand_item_content:"expand_item_content--3OMk6"}},90:function(e,t,n){e.exports={img_preview:"img_preview--25MqK",upload_action:"upload_action--K2bb5",table_striped:"table_striped--29H9L",picker_container:"picker_container--2hqnB","ant-input":"ant-input--2WrCM"}}},[[323,1,2]]]);
//# sourceMappingURL=main.401ab293.chunk.js.map